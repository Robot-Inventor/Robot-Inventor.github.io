<!DOCTYPE html>
<html>
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140830854-3"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-140830854-3');
        </script>
        <!--**********ここからプリロード（読み込み高速化用）**********-->
        <link rel="preload" href="/etc/css/main_style.min.css" as="style">
        <link rel="preload" href="https://code.jquery.com/jquery-3.2.1.min.js" as="script">
        <link rel="preload" href="/etc/js/basic.min.js" as="script">
        <link rel="preload" href="/etc/js/lazysizes.min.js" as="script">
        <!--**********プリロード（読み込み高速化用）ここまで**********-->
        <!--**********ここからアイコン・その他の設定**********-->
        <link rel="icon" type="image/x-icon" href="https://robot-inventor.github.io/icon/favicon.ico">
        <link rel="shortcut icon" href="https://robot-inventor.github.io/icon/favicon.ico">
        <link rel="apple-touch-icon" sizes="180x180" href="https://robot-inventor.github.io/icon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://robot-inventor.github.io/icon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="194x194" href="https://robot-inventor.github.io/icon/favicon-194x194.png">
        <link rel="icon" type="image/png" sizes="192x192" href="https://robot-inventor.github.io/icon/android-chrome-192x192.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://robot-inventor.github.io/icon/favicon-16x16.png">
        <link rel="manifest" href="https://robot-inventor.github.io/icon/site.webmanifest">
        <link rel="mask-icon" href="https://robot-inventor.github.io/icon/safari-pinned-tab.svg" color="#d2691e">
        <meta name="apple-mobile-web-app-title" content="理系YouTuber">
        <meta name="application-name" content="理系YouTuber">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="msapplication-TileImage" content="https://robot-inventor.github.io/icon/mstile-144x144.png">
        <meta name="theme-color" content="#333333">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/etc/css/main_style.min.css">
        <title>Raspberry Pi 4 Model B発売!そして、OSをBusterへ更新しよう - 理系YouTuberのブログ的な何か</title>
        <meta name="description" content="Raspberry Pi 4 Model Bの発売に合わせ、新しいRaspberry Pi用OSがリリースされました。最新のOSに更新しましょう。">
        <!--**********アイコン・その他の設定ここまで**********-->
    </head>
    <body>
        <header>
        </header>
        <main>
            <h1>2020/01/16（木）　Raspberry Pi 4 Model B発売!そして、OSをBusterへ更新しよう</h1>
            <figure>
                <picture>
                    <source type="image/webp" data-srcset="/article/2020/01/16/raspberry_pi.png.webp" class="half_height lazyload">
                    <image src="/icon/30.svg" data-src="/article/2020/01/16/raspberry_pi.png" class="half_height lazyload">
                </picture>
                <figcaption>
                    <p>
                        <strong>O</strong>Sを更新しましょう
                    </p>
                </figcaption>
            </figure>
            <a href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/">https://www.raspberrypi.org/products/raspberry-pi-4-model-b/</a>より引用
            <div class="important">
                この記事は、私がQiitaに投稿したものに少し変更を加えたものです。<a href="https://qiita.com/Robot-Inventor/items/b565e323b94fc2985ec0">この記事をQiitaで読む</a>
            </div>
            <h2>Raspberry Pi 4 Model B発売</h2>
            <p>
                2019年6月24日、"$35 PC"として有名なRaspberry Piの最新モデル、"Raspberry Pi 4 Model B"の販売が海外で開始され、2019年11月26日に日本での販売が始まりました。
            </p>
            <p>
                Raspberry Pi 4 Model Bの大まかな仕様は、以下のような感じです。
            </p>
            <div class="quote">
                <h3 class="no_color no_border">Raspberry Pi 4 Model B</h3>
                <p>
                    Here are the highlights:
                </p>
                <p>
                    -A 1.5GHz quad-core 64-bit ARM Cortex-A72 CPU (~3× performance)<br>
                    -1GB, 2GB, or 4GB of LPDDR4 SDRAM<br>
                    -Full-throughput Gigabit Ethernet<br>
                    -Dual-band 802.11ac wireless networking<br>
                    -Bluetooth 5.0<br>
                    -Two USB 3.0 and two USB 2.0 ports<br>
                    -Dual monitor support, at resolutions up to 4K<br>
                    -VideoCore VI graphics, supporting OpenGL ES 3.x<br>
                    -4Kp60 hardware decode of HEVC video<br>
                    -Complete compatibility with earlier Raspberry Pi products
                </p>
                <a href="https://www.raspberrypi.org/blog/raspberry-pi-4-on-sale-now-from-35/">公式サイトのブログ</a>より引用
            </div>
            <p>
                日本語に翻訳すると、大体こんな感じです（分かりやすいように言葉を変えたり足したりしています）。
            </p>
            <div class="quote">
                <h3 class="no_color no_border">Raspberry Pi 4 Model B</h3>
                <p>
                    Raspberry Pi 4 Model B の主要な情報：
                </p>
                <p>
                    -最大でパフォーマンスが3倍の 1.5GHz 64-bit のクアッドコア ARM Cortex-A72 CPU<br>
                    -1GB、2GB又は4GB の LPDDR4 SDRAM メモリ<br>
                    -フルスループットのギガビットイーサネット（つまり、今までと違って文字通り正真正銘の「ギガビット」）<br>
                    -デュアルバンドの 802.11ac ワイヤレス LAN（つまり Wi-Fi）<br>
                    -Bluetooth5.0<br>
                    -USB2.0 ポートと USB3.0 ポートそれぞれ2つずつ<br>
                    -解像度が 4K にアップし、デュアルモニタをサポート<br>
                    -ビデオコア VI グラフィックスと OpenGL ES 3.x のサポート<br>
                    -4K の 60fps での HEVC ビデオのハードウェアデコード<br>
                    -完璧な後方互換
                </p>
            </div>
            <h2>Raspbian StretchからBusterへ</h2>
            <p>
                そして、いつも通り最新のRaspberry Piに対応した新しいRaspbian（Raspberry Pi用のOS）がリリースされました。
            </p>
            <p>
                今まではRaspbian Stretchでしたが、新しいOSはRaspbian Busterです。ちなみに、Raspbianが元にしているLinuxディストリビューションであるDebianのBusterは2019年7月7日リリースです。
            </p>
            <p>
                DebianよりもRaspbianのBusterの方が先にリリースされたのは、Debian Busterで開発されたRaspberry Pi 4のビデオドライバ関連の新機能をRaspbian Stretchに移植するのが大変で、また、Debian Busterがほぼ完成していたからのようです。そのあたりは公式サイトのブログの<a href="https://www.raspberrypi.org/blog/buster-the-new-version-of-raspbian/">Raspbian Busterについての記事</a>に詳しく書かれています。
            </p>
            <p>
                新OSでは、UIデザインが変わったりするようです。
            </p>
            <h2>OSを更新しよう</h2>
            <p>
                公式ではStretchからBusterに更新するのではなくBusterをクリーンインストールすることを推奨していますが、面倒なので更新します。しかし、あくまで自己責任でお願いします。
            </p>
            <p>
                また、バックアップを取っておいた方が良いと思います。
            </p>
            <p>
                最初に注意しておきますが、先ほど紹介した記事には30分から数時間かかると書いてありますが、確実に数時間かかります。まとまった時間が取れるときに更新するべきです。
            </p>
            <p>
                では、更新していきましょう。ターミナルで
            </p>
            <div>
                $ sudo nano /etc/apt/sources.list
            </div>
            <p>
                を実行し、ファイル内の"stretch"を全て"buster"に書き換えます。私の環境では2ヶ所でした。
            </p>
            <p>
                次に
            </p>
            <div>
                $ sudo nano /etc/apt/sources.list.d/raspi.list
            </div>
            <p>
                を実行し、同じ作業を行います。
            </p>
            <p>
                そして、お決まりの
            </p>
            <div>
                $ sudo apt update<br>
                または<br>
                $ sudo apt-get update
            </div>
            <p>
                続いて
            </p>
            <div>
                $ sudo apt dist-upgrade<br>
                または<br>
                $ sudo apt-get dist-upgrade
            </div>
            <p>
                私の環境では、新たにインストールしたりアップグレードしたりするパッケージが1300個くらいありました。
            </p>
            <p>
                測っていなかったので正確には分かりませんが、3時間〜4時間くらいかかります。しかし、それでも有線LANだったのでWi-F（無線LAN）だと場合によってはもっとかかるかもしれません。
            </p>
            <p>
                また、何回か「この設定って、どうする？」的なことを聞かれたので、更新を始めたら放置しておくというやり方はおすすめできません。放置だと、何か聞かれたら最後、そこから先に進みません。定期的に何か聞かれていないか確認しましょう。
            </p>
            <p>
                何か聞かれた場合、基本的には、回答の選択肢にY（Yes）があればy 、ターミナルの画面1つ分以上を埋め尽くす良く分からないメッセージが出たらqと答えれば大丈夫です（たぶん。保証はできません）。
            </p>
            <p>
                その後、念の為、以下も実行します。
            </p>
            <div>
                $ sudo apt-get upgrade<br>
                $ sudo apt-get autoremove<br>
                $ sudo apt-get autoclean
            </div>
            <p>
                2つ目のコマンドを実行すると、「Stretchで必要だったけどBusterで不要になったもの」が削除されます。
            </p>
            <p>
                サポートされていないパッケージもあるようなので
            </p>
            <div>
                $ sudo apt purge timidity lxmusic gnome-disk-utility deluge-gtk evince wicd wicd-gtk clipit usermode gucharmap gnome-system-tools pavucontrol
            </div>
            <p>
                で削除します。
            </p>
            <p>
                これで、Raspbian Busterを導入できました。<br>
                証拠↓（neofetchは、システムの情報とOSのロゴのアスキーアートを表示してくれます。興味があったらインストールしてみてください。）
            </p>
            <picture>
                <source type="image/webp" data-srcset="/article/2020/01/16/スクショ.png.webp" class="lazyload">
                <img src="/icon/30.svg" data-src="/article/2020/01/16/スクショ.png" class="lazyload">
            </picture>
            <p>
                OS の欄に"buster"と表示されているのがわかると思います。
            </p>
            <h2>UIをBuster化</h2>
            <p>
                上記の長い更新をしても、UIはおそらく何も変わらないはずです。StretchのUIではなくBusterのUIにするには、再起動したあと、
            </p>
            <div>
                メインメニュー > Appearance Settings > Defaults タブ
            </div>
            <p>
                のいくつかあるSet Defaultsボタンの内、自分の使っている画面にあったものを押します。ただし、これを押すと、デスクトップの壁紙やウィンドウ上部の色なども自動的に変更されるため、カスタマイズしていた場合は再度設定が必要になります。また、ボタンを間違えた場合はそのまま正しいボタンを押せば問題ありません。ちなみに、メインメニューは、Raspberry Piの画面上部のタスクバーの1番左にあるRaspberry Piのロゴです。
            </p>
            <h2>新しいUIは、「平ら」であります。</h2>
            <p>
                新しいUIは、StretchのUIのボタンにあったような立体感がなくなり、全体的に平べったくなっています。また、ウィンドウ右上の「閉じる」「ウィンドウの最大化」「ウィンドウを隠す」ボタンの内、「閉じる」以外の2つのボタンのデザインが変わりました。デザインは、<a href="https://www.raspberrypi.org/blog/buster-the-new-version-of-raspbian/">Raspbian Busterについての記事</a>の画像を見るのが分かりやすいと思います。
            </p>
            <h2>Stretchからの変更点</h2>
            <p>
                Raspbian Stretchから変更された点を気付き次第追記していきます。
            </p>
            <table style="width: calc(100% - 1em); margin-left: 0.5em;">
                <tr>
                    <th>
                        変更点
                    </th>
                    <th>
                        Stretch
                    </th>
                    <th>
                        Buster
                    </th>
                </tr>
                <tr>
                    <td>
                        ボタンのデザイン
                    </td>
                    <td>
                        影あり
                    </td>
                    <td>
                        影（ほぼ）なし
                    </td>
                </tr>
                <tr>
                    <td>
                        ウィンドウ上部のボタンのデザイン
                    </td>
                    <td>
                        _ □ ✕
                    </td>
                    <td>
                        <a href="https://www.raspberrypi.org/blog/buster-the-new-version-of-raspbian/">公式サイト</a>参照
                    </td>
                </tr>
                <tr>
                    <td>
                        ウィンドウの色
                    </td>
                    <td>
                        水色
                    </td>
                    <td>
                        グレー
                    </td>
                </tr>
                <tr>
                    <td>
                        デフォルトのデスクトップの壁紙
                    </td>
                    <td>
                        道路の写真
                    </td>
                    <td>
                        どこかの寺院（？）の写真
                    </td>
                </tr>
                <tr>
                    <td>
                        起動中の画面
                    </td>
                    <td></td>
                    <td>
                        Stretch の時と同じ一連の画面 + Debian のロゴ画面
                    </td>
                </tr>
            </table>
            <h2>2019/07/14　追記</h2>
            <p>
                2019年7月10日にRaspbian Busterの新しいバージョンが公開されました。Linuxカーネルが4.19.50から4.19.57に更新されました。その他の変更点は、<a href="http://downloads.raspberrypi.org/raspbian/release_notes.txt">リリースノート</a>に書かれています。
            </p>
            <h2>2019/10/09　追記</h2>
            <p>
                久しぶりにsudo apt updateとsudo apt upgradeをしてみたらカーネルが4.19.66に更新され、ファイルマネージャのアイコンのデザインが変わりました。また、それに伴い、デスクトップに置いているファイルのアイコンも変わりました。さらに、起動時にDebianロゴが表示されなくなりました。新デザインは、以下のような感じです。
            </p>
            <picture>
                <source type="image/webp" data-srcset="/article/2020/01/16/ファイルマネージャ_スクリーンショット.png.webp" class="lazyload">
                <img src="/icon/30.svg" data-src="/article/2020/01/16/ファイルマネージャ_スクリーンショット.png" class="lazyload">
            </picture>
        </main>
        <footer>
        </footer>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script async src="/etc/js/basic.min.js"></script>
        <script async src="/etc/js/lazysizes.min.js"></script>
    </body>
</html>
